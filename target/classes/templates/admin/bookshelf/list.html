<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω t·ªß s√°ch</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div th:replace="fragments/header :: header"></div>

<div class="container">
    <div class="page-header">
        <h1>Qu·∫£n l√Ω t·ªß s√°ch</h1>
        <a th:href="@{/admin/bookshelves/create}" class="btn btn-primary">
            ‚ûï Th√™m t·ªß s√°ch
        </a>
    </div>

    <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

    <div class="search-form">
        <form th:action="@{/admin/bookshelves}" method="get">
            <div class="form-row">
                <div class="form-group">
                    <input type="text" name="keyword" placeholder="T√¨m theo m√£, d√£y..." th:value="${keyword}">
                </div>
                <div class="form-group">
                    <input type="number" name="floor" placeholder="T·∫ßng" th:value="${floor}">
                </div>
                <button type="submit" class="btn btn-primary">üîç T√¨m ki·∫øm</button>
            </div>
        </form>
    </div>

    <div class="table-container">
        <table class="data-table">
            <thead>
            <tr>
                <th>M√£ t·ªß</th>
                <th>T·∫ßng</th>
                <th>D√£y</th>
                <th>S·ªë s√°ch</th>
                <th>Thao t√°c</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="bs : ${pageData.content}">
                <td th:text="${bs.code}"></td>
                <td th:text="${bs.floor}"></td>
                <td th:text="${bs.section}"></td>
                <td th:text="${#lists.size(bs.books)}"></td>
                <td>
                    <a th:href="@{/admin/bookshelves/{id}/edit(id=${bs.id})}" class="btn btn-sm btn-warning">‚úèÔ∏è</a>
                    <form th:action="@{/admin/bookshelves/{id}/delete(id=${bs.id})}" method="post"
                          style="display:inline"
                          onsubmit="return confirm('X√°c nh·∫≠n xo√° t·ªß s√°ch n√†y?')">
                        <button type="submit" class="btn btn-sm btn-danger">üóë</button>
                    </form>
                </td>
            </tr>
            <tr th:if="${pageData.totalElements == 0}">
                <td colspan="5">Kh√¥ng c√≥ d·ªØ li·ªáu</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="pagination" th:if="${pageData.totalPages > 1}">
        <a th:if="${pageData.hasPrevious()}"
           th:href="@{/admin/bookshelves(page=${pageData.number - 1})}" class="btn btn-sm">¬´ Tr∆∞·ªõc</a>

        <span th:each="i : ${#numbers.sequence(0, pageData.totalPages - 1)}">
            <a th:if="${i != pageData.number}"
               th:href="@{/admin/bookshelves(page=${i})}" th:text="${i + 1}" class="btn btn-sm"></a>
            <span th:if="${i == pageData.number}" th:text="${i + 1}" class="btn btn-sm btn-primary"></span>
        </span>

        <a th:if="${pageData.hasNext()}"
           th:href="@{/admin/bookshelves(page=${pageData.number + 1})}" class="btn btn-sm">Sau ¬ª</a>
    </div>
</div>
</body>
</html>
