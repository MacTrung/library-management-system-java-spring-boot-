<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Qu·∫£n tr·ªã vi√™n</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div th:replace="fragments/header :: header"></div>
    
    <div class="container">
        <div class="dashboard">
            <div class="page-header">
                <h1>Dashboard Qu·∫£n tr·ªã vi√™n</h1>
                <p>Ch√†o m·ª´ng, <span th:text="${user.fullName}"></span>!</p>
            </div>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-content">
                        <h3>T·ªïng s·ªë s√°ch</h3>
                        <div class="stat-number" th:text="${totalBooks}">0</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üìñ</div>
                    <div class="stat-content">
                        <h3>S√°ch ƒëang ƒë∆∞·ª£c m∆∞·ª£n</h3>
                        <div class="stat-number" th:text="${borrowedBooks}">0</div>
                    </div>
                </div>
                
                <div class="stat-card warning">
                    <div class="stat-icon">‚ö†Ô∏è</div>
                    <div class="stat-content">
                        <h3>S√°ch qu√° h·∫°n</h3>
                        <div class="stat-number" th:text="${overdueBooks}">0</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-content">
                        <h3>Ng∆∞·ªùi d√πng ho·∫°t ƒë·ªông</h3>
                        <div class="stat-number" th:text="${activeUsers}">0</div>
                    </div>
                </div>
                
                <div class="stat-card info">
                    <div class="stat-icon">üìã</div>
                    <div class="stat-content">
                        <h3>Y√™u c·∫ßu gia h·∫°n</h3>
                        <div class="stat-number" th:text="${pendingRequests}">0</div>
                    </div>
                </div>
            </div>
            <div class="dashboard-actions">
                <h2>Qu·∫£n l√Ω h·ªá th·ªëng</h2>
                <div class="action-grid">
                    <a th:href="@{/admin/books}" class="action-card">
                        <div class="action-icon">üìö</div>
                        <div class="action-content">
                            <h3>Qu·∫£n l√Ω s√°ch</h3>
                            <p>Th√™m, s·ª≠a, x√≥a th√¥ng tin s√°ch trong th∆∞ vi·ªán</p>
                        </div>
                    </a>

                    <a th:href="@{/admin/authors}" class="action-card">
                        <div class="action-icon">‚úçÔ∏è</div>
                        <div class="action-content">
                            <h3>Qu·∫£n l√Ω t√°c gi·∫£</h3>
                            <p>Qu·∫£n l√Ω th√¥ng tin t√°c gi·∫£ v√† t√°c ph·∫©m</p>
                        </div>
                    </a>

                    <a th:href="@{/admin/borrows}" class="action-card">
                        <div class="action-icon">üìã</div>
                        <div class="action-content">
                            <h3>Qu·∫£n l√Ω m∆∞·ª£n tr·∫£</h3>
                            <p>Theo d√µi v√† x·ª≠ l√Ω c√°c ƒë∆°n m∆∞·ª£n s√°ch</p>
                        </div>
                    </a>

                    <a th:href="@{/admin/users}" class="action-card">
                        <div class="action-icon">üë•</div>
                        <div class="action-content">
                            <h3>Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h3>
                            <p>Qu·∫£n l√Ω t√†i kho·∫£n v√† th√¥ng tin ng∆∞·ªùi d√πng</p>
                        </div>
                    </a>

                    <a th:href="@{/admin/extension-requests}" class="action-card">
                        <div class="action-icon">‚è∞</div>
                        <div class="action-content">
                            <h3>Y√™u c·∫ßu gia h·∫°n</h3>
                            <p>X·ª≠ l√Ω c√°c y√™u c·∫ßu gia h·∫°n t·ª´ ng∆∞·ªùi d√πng</p>
                        </div>
                    </a>

                    <a th:href="@{/admin/bookshelves}" class="action-card">
                        <div class="action-icon">üóÑÔ∏è</div>
                        <div class="action-content">
                            <h3>Qu·∫£n l√Ω t·ªß s√°ch</h3>
                            <p>Qu·∫£n l√Ω v·ªã tr√≠ v√† ph√¢n lo·∫°i t·ªß s√°ch</p>
                        </div>
                    </a>
                </div>
            </div>

            <br>
            <br>

            <h2>Th·ªëng K√™</h2>
            <br>
            <div>
                <div class="dashboard-charts">
                    <div class="chart-container">
                        <h3>Th·ªëng k√™ m∆∞·ª£n s√°ch theo th√°ng</h3>
                        <canvas id="borrowChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>Ph√¢n b·ªë theo th·ªÉ lo·∫°i</h3>
                        <canvas id="genreChart"></canvas>
                    </div>
                </div>
            </div>

            

        </div>
    </div>
    
    <script>
        // Sample chart data - in real application, this would come from the server
        const borrowCtx = document.getElementById('borrowChart').getContext('2d');
        new Chart(borrowCtx, {
            type: 'line',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6'],
                datasets: [{
                    label: 'S·ªë l∆∞·ª£t m∆∞·ª£n',
                    data: [65, 59, 80, 81, 56, 55],
                    borderColor: '#3498db',
                    backgroundColor: 'rgba(52, 152, 219, 0.1)',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
        
        const genreCtx = document.getElementById('genreChart').getContext('2d');
        new Chart(genreCtx, {
            type: 'doughnut',
            data: {
                labels: ['VƒÉn h·ªçc', 'Khoa h·ªçc', 'L·ªãch s·ª≠', 'Tri·∫øt h·ªçc', 'Kh√°c'],
                datasets: [{
                    data: [30, 25, 20, 15, 10],
                    backgroundColor: [
                        '#3498db',
                        '#e74c3c',
                        '#f39c12',
                        '#27ae60',
                        '#9b59b6'
                    ]
                }]
            },
            options: {
                responsive: true
            }
        });
    </script>
</body>
</html>
